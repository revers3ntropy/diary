<script lang="ts" ✂prettier:content✂="CiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJzsKICAgIGltcG9ydCBCYWNrZ3JvdW5kIGZyb20gJy4uLy4uL2xpYi9jYW52YXMvQmFja2dyb3VuZC5zdmVsdGUnOwogICAgaW1wb3J0IENhbnZhcyBmcm9tICcuLi8uLi9saWIvY2FudmFzL0NhbnZhcy5zdmVsdGUnOwogICAgaW1wb3J0IHsgY2FudmFzU3RhdGUgfSBmcm9tICcuLi8uLi9saWIvY2FudmFzL2NhbnZhc0hlbHBlcnMnOwogICAgaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuLi8uLi9saWIvY29udHJvbGxlcnMvZXZlbnQnOwogICAgaW1wb3J0IHsgbm93UyB9IGZyb20gJy4uLy4uL2xpYi91dGlscy90aW1lJzsKICAgIGltcG9ydCB0eXBlIHsgVGltZWxpbmVFbnRyeSB9IGZyb20gJy4vK3BhZ2Uuc2VydmVyJzsKICAgIGltcG9ydCBDZW50ZXJMaW5lIGZyb20gJy4vQ2VudGVyTGluZS5zdmVsdGUnOwogICAgaW1wb3J0IENvbnRyb2xzIGZyb20gJy4vQ29udHJvbHMuc3ZlbHRlJzsKICAgIGltcG9ydCBFbnRyeUluVGltZWxpbmUgZnJvbSAnLi9FbnRyeUluVGltZWxpbmUuc3ZlbHRlJzsKICAgIGltcG9ydCBFdmVudEluVGltZWxpbmUgZnJvbSAnLi9FdmVudEluVGltZWxpbmUuc3ZlbHRlJzsKICAgIGltcG9ydCBOb3dMaW5lIGZyb20gJy4vTm93TGluZS5zdmVsdGUnOwogICAgaW1wb3J0IFRpbWVDdXJzb3IgZnJvbSAnLi9UaW1lQ3Vyc29yLnN2ZWx0ZSc7CiAgICBpbXBvcnQgVGltZU1hcmtlcnMgZnJvbSAnLi9UaW1lTWFya2Vycy5zdmVsdGUnOwogICAgaW1wb3J0IHsgYWRkWVRvRXZlbnRzLCB0eXBlIEV2ZW50V2l0aFlMZXZlbCB9IGZyb20gJy4vdXRpbHMnOwoKICAgIGV4cG9ydCBsZXQgZGF0YTogQXBwLlBhZ2VEYXRhICYgewogICAgICAgIGVudHJpZXM6IFRpbWVsaW5lRW50cnlbXTs,KICAgICAgICBldmVudHM6IEV2ZW50W107CiAgICB9OwoKICAgIGxldCBldmVudHM6IEV2ZW50V2l0aFlMZXZlbFtdOwoKICAgIGNvbnN0IGV2ZW50QmFzZVkgPSA0OwoKICAgICQ6IGV2ZW50cyA9IGFkZFlUb0V2ZW50cyhkYXRhLmV2ZW50cyk7CgogICAgZnVu,Y3Rpb24gc2V0SW5pdGlhbFpvb21BbmRQb3MgKCkgewogICAgICAgIGNvbnN0IGVhcmxpZXN0VGltZXN0YW1wID0gTWF0aC5taW4oCiAgICAgICAgICAgIC4uLmRhdGEuZW50cmllcy5tYXAoZSA9PiBlLmNyZWF0ZWQpLAogICAgICAgICAgICAuLi5kYXRhLmV2ZW50cy5tYXAoZSA9PiBlLnN0YXJ0KQogICAgICAgICk7CiAgICAgICAgY29uc3QgZWFybGllc3RUaW1lc3RhbXBUaW1lQWdvID0gbm93UygpIC0gZWFybGllc3RUaW1lc3RhbXA7CiAgICAgICAgY29uc3QgZGF5c0FnbyA9IE1hdGgucm91bmQoCiAgICAgICAgICAgIE1hdGgubWluKDUyLCBNYXRoLm1heChlYXJsaWVzdFRpbWVzdGFtcFRpbWVBZ28gLyAoNjAgKiA2MCAqIDI0KSwgMCkpCiAgICAgICAgKTsKCiAgICAgICAgLy8gem9vbSBzbyB0aGF0IHRoZXJlIGlzIDEgZGF5IG9mIGJsYW5rIHNwYWNlIHRvIHRoZSBsZWZ0CiAgICAgICAgLy8gb2YgdGhlIGxhc3QgZW50cnkvZXZlbnQsCiAgICAgICAgLy8gZXhjZXB0IGlmIGl0IGlzIG1vcmUgdGhhbiA1MiBkYXlzIGFnbywKICAgICAgICAvLyB0aGVuIHNob3cgNTMgZGF5cwogICAgICAgICRjYW52YXNTdGF0ZS56b29tID0gMSAvIDYwIC8gKGRheXNBZ28gKyAxKTsKCiAgICAgICAgJGNhbnZhc1N0YXRlLmNhbWVyYU9mZnNldCA9CiAgICAgICAgICAgICRjYW52YXNTdGF0ZS50aW1lVG9SZW5kZXJQb3Mobm93UygpKSAtICgkY2FudmFzU3RhdGUud2lkdGggKiAzKSAvIDQ7CiAgICB9CgogICAgb25Nb3VudChzZXRJbml0aWFsWm9vbUFuZFBvcyk7CgogICAgb25Nb3VudCgoKSA9PiAoZG9jdW1lbnQudGl0bGUgPSAnVGltZWxpbmUnKSk7Cg==">{}</script>

<svelte:head>
    <title>Timeline</title>
    <meta content="Timeline" name="description" />

    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <!-- put the style here because the styles should all be global,
        however when switching pages the styles get leaked and cause
        weird issues (the bar chart not showing on the stats page) -->
    <style lang="less" ✂prettier:content✂="CiAgICAgICAgQGltcG9ydCAnLi4vLi4vc3R5bGVzL3ZhcmlhYmxlcyc7CgogICAgICAgIC8qCiAgICAgICAgICAgIHB1dCB0aGUgY2FudmFzIGJlaGluZCBldmVyeXRoaW5nLAogICAgICAgICAgICBidXQgZmlsbGluZyB0aGUgc2NyZWVuCiAgICAgICAgKi8KICAgICAgICBjYW52YXMgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgei1pbmRleDogMTsKICAgICAgICB9CgogICAgICAgIGZvb3RlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDB2dzsKICAgICAgICB9CgogICAgICAgIG5hdiB7CiAgICAgICAgICAgIC8vIG1ha2UgbmF2YmFyIHZpc2libGUgd2hlbiBob3ZlcmluZyB0byBzdG9wIHVuZXhwZWN0ZWQKICAgICAgICAgICAgLy8gYmVoYXZpb3VyIHdoZW4gaG92ZXJpbmcgb24gbmF2YmFyCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgQHRyYW5zaXRpb247CgogICAgICAgICAgICAmOmhvdmVyIHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IEBoZWFkZXItYmc7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA="></style>
</svelte:head>

<main>
    <Canvas>
        <Controls />
        <Background />

        <TimeMarkers startYear="{data.settings.yearOfBirth.value}" />

        <NowLine />

        {#each data.entries as entry, i}
            <EntryInTimeline {...entry} entryTextParityHeight="{i % 2 === 0}" />
        {/each}

        {#each events as event, i}
            <EventInTimeline
                {...event}
                yLevel="{Event.duration(event) < 60
                    ? eventBaseY
                    : eventBaseY + 1 + event.yLevel}"
                eventTextParityHeight="{i % 2 === 0}"
            />
        {/each}

        <CenterLine />
        <TimeCursor />
    </Canvas>
</main>