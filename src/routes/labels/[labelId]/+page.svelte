<script lang="ts" ✂prettier:content✂="CiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJzsKICAgIGltcG9ydCBEZWxldGUgZnJvbSAnc3ZlbHRlLW1hdGVyaWFsLWljb25zL0RlbGV0ZS5zdmVsdGUnOwogICAgaW1wb3J0IHsgZ2V0Tm90aWZpY2F0aW9uc0NvbnRleHQgfSBmcm9tICdzdmVsdGUtbm90aWZpY2F0aW9ucyc7CiAgICBpbXBvcnQgRW50cmllcyBmcm9tICcuLi8uLi8uLi9saWIvY29tcG9uZW50cy9FbnRyaWVzLnN2ZWx0ZSc7CiAgICBpbXBvcnQgdHlwZSB7IEV2ZW50IGFzIEV2ZW50Q29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb250cm9sbGVycy9ldmVudCc7CiAgICBpbXBvcnQgdHlwZSB7IExhYmVsIH0gZnJvbSAnLi4vLi4vLi4vbGliL2NvbnRyb2xsZXJzL2xhYmVsJzsKICAgIGltcG9ydCB7IG9iZnVzY2F0ZWQgfSBmcm9tICcuLi8uLi8uLi9saWIvc3RvcmVzJzsKICAgIGltcG9ydCB7IGFwaSwgYXBpUGF0aCB9IGZyb20gJy4uLy4uLy4uL2xpYi91dGlscy9hcGlSZXF1ZXN0JzsKICAgIGltcG9ydCB7IGRpc3BsYXlOb3RpZk9uRXJyIH0gZnJvbSAnLi4vLi4vLi4vbGliL3V0aWxzL25vdGlmaWNhdGlvbnMnOwogICAgaW1wb3J0IHsgc2hvd1BvcHVwIH0gZnJvbSAnLi4vLi4vLi4vbGliL3V0aWxzL3BvcHVwcyc7CiAgICBpbXBvcnQgRXZlbnQgZnJvbSAnLi4vLi4vZXZlbnRzL0V2ZW50LnN2ZWx0ZSc7CiAgICBpbXBvcnQgRGVsZXRlTGFiZWxEaWFsb2cgZnJvbSAnLi4vRGVsZXRlTGFiZWxEaWFsb2cuc3ZlbHRlJzsKCiAgICBjb25zdCB7IGFkZE5vdGlmaWNhdGlvbiB9ID0gZ2V0Tm90aWZpY2F0aW9uc0NvbnRleHQoKTsKCiAgICBleHBvcnQgbGV0IGRhdGE6IEFwcC5QYWdlRGF0YSAmIHsKICAgICAgICBsYWJlbDogTGFiZWw7CiAgICAgICAgZW50cnlDb3VudDogbnVtYmVyOwogICAgICAgIGV2ZW50czogRXZlbnRDb250cm9sbGVyW107CiAgICAgICAgbGFiZWxzOiBMYWJlbFtdOwogICAgfTsKCiAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVOYW1lICgpIHsKICAgICAgICBkaXNwbGF5Tm90aWZPbkVycigKICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uLAogICAgICAgICAgICBhd2FpdCBhcGkucHV0KGRhdGEsIGFwaVBhdGgoJy9sYWJlbHMvPycsIGRhdGEubGFiZWwuaWQpLCB7CiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLmxhYmVsLm5hbWUsCiAgICAgICAgICAgIH0pLAogICAgICAgICk7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ29sb3VyICgpIHsKICAgICAgICBkaXNwbGF5Tm90aWZPbkVycigKICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uLAogICAgICAgICAgICBhd2FpdCBhcGkucHV0KGRhdGEsIGFwaVBhdGgoJy9sYWJlbHMvPycsIGRhdGEubGFiZWwuaWQpLCB7CiAgICAgICAgICAgICAgICBjb2xvdXI6IGRhdGEubGFiZWwuY29sb3VyLAogICAgICAgICAgICB9KSwKICAgICAgICApOwogICAgfQoKICAgIG9uTW91bnQoKCkgPT4gKGRvY3VtZW50LnRpdGxlID0gYCR7ZGF0YS5sYWJlbC5uYW1lfSAtIExhYmVsYCkpOwoKICAgIGxldCBldmVudENvdW50ID0gZGF0YS5ldmVudHMubGVuZ3RoOwoKICAgIGZ1bmN0aW9uIGNoYW5nZUV2ZW50Q291bnQgKGJ5OiBudW1iZXIpIHsKICAgICAgICBldmVudENvdW50ICs9IGJ5OwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUxhYmVsICgpIHsKICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gZW50cmllcyBvciBldmVudHMgdGllZCB0byB0aGlzCiAgICAgICAgLy8gbGFiZWwsIGRlbGV0aW5nIGl0IGVhc3ksIGJ1dCBpZiB0aGVyZSBhcmUgdGhlbgogICAgICAgIC8vIGEgbW9yZSBjb21wbGV4IGFwcHJvYWNoIGlzIHJlcXVpcmVkIHRvIGNsZWFyIHRoZQogICAgICAgIC8vIGxhYmVsIGZyb20gdGhlIGVudHJpZXMgYW5kIGV2ZW50cwogICAgICAgIGlmIChkYXRhLmVudHJ5Q291bnQgKyBldmVudENvdW50IDwgMSkgewogICAgICAgICAgICBkaXNwbGF5Tm90aWZPbkVycigKICAgICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbiwKICAgICAgICAgICAgICAgIGF3YWl0IGFwaS5kZWxldGUoZGF0YSwgYXBpUGF0aChgL2xhYmVscy8/YCwgZGF0YS5sYWJlbC5pZCkpCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGxvY2F0aW9uLmFzc2lnbignLi4vJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNob3dQb3B1cCgKICAgICAgICAgICAgRGVsZXRlTGFiZWxEaWFsb2csCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGF1dGg6IGRhdGEsCiAgICAgICAgICAgICAgICBpZDogZGF0YS5sYWJlbC5pZCwKICAgICAgICAgICAgICAgIGNvbG91cjogZGF0YS5sYWJlbC5jb2xvdXIsCiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLmxhYmVsLm5hbWUsCiAgICAgICAgICAgICAgICByZWxvYWRPbkRlbGV0ZTogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKCcvbGFiZWxzJyk7CiAgICAgICAgICAgIH0KICAgICAgICApOwogICAgfQo=">{}</script>

<svelte:head>
    <title>{data.label.name} - Label</title>
    <meta content="Label" name="description" />
</svelte:head>

<main>
    <div class="colour-select" style="border-color: {data.label.colour}">
        {data.label.colour}
        <input
            type="color"
            bind:value="{data.label.colour}"
            on:change="{updateColour}"
        />
    </div>
    <div class="title-line">
        <input
            class="name editable-text"
            bind:value="{data.label.name}"
            on:change="{updateName}"
        />
        <button class="with-circled-icon danger" on:click="{deleteLabel}">
            <Delete size="30" />
            Delete this Label
        </button>
    </div>

    {#if eventCount > 0}
        <section>
            <h1>
                {eventCount}
                Event{eventCount !== 1 ? 's' : ''}
            </h1>
            <div class="events">
                {#each data.events as event}
                    <Event
                        auth="{data}"
                        event="{event}"
                        changeEventCount="{changeEventCount}"
                        labels="{data.labels}"
                        obfuscated="{$obfuscated}"
                    />
                {/each}
            </div>
        </section>
    {/if}

    <section>
        <h1>{data.entryCount} {data.entryCount === 1 ? 'Entry' : 'Entries'}</h1>
        <Entries
            auth="{data}"
            options="{{ labelId: data.label.id }}"
            showLabels="{false}"
            pageSize="{data.settings.entriesPerPage.value}"
        />
    </section>
</main>

<style lang="less" ✂prettier:content✂="CiAgICBAaW1wb3J0ICcuLi8uLi8uLi9zdHlsZXMvbGF5b3V0JzsKCiAgICAudGl0bGUtbGluZSB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIH0KCiAgICAubmFtZSB7CiAgICAgICAgZm9udC1zaXplOiAyZW07CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICB9CgogICAgLmNvbG91ci1zZWxlY3QgewogICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxZW0pOwogICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgYmxhY2s7CiAgICAgICAgZm9udC1zaXplOiAxZW07CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgcGFkZGluZzogMC40ZW07CiAgICAgICAgbWFyZ2luOiAwLjRlbSAwOwogICAgfQoKICAgIC5ldmVudHMgewogICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwJSA1MCU7CgogICAgICAgIEBtZWRpYSBAbW9iaWxlIHsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMDAlOwogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgfQogICAgfQo="></style>