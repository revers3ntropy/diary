<script lang="ts" ✂prettier:content✂="CiAgICBpbXBvcnQgeyBicm93c2VyIH0gZnJvbSAnJGFwcC9lbnZpcm9ubWVudCc7CiAgICBpbXBvcnQgeyB0b29sdGlwIH0gZnJvbSAnQHN2ZWx0ZS1wbHVnaW5zL3Rvb2x0aXBzJzsKICAgIGltcG9ydCB7IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJ3N2ZWx0ZSc7CiAgICBpbXBvcnQgQmluIGZyb20gJ3N2ZWx0ZS1tYXRlcmlhbC1pY29ucy9EZWxldGUuc3ZlbHRlJzsKICAgIGltcG9ydCBSZXN0b3JlIGZyb20gJ3N2ZWx0ZS1tYXRlcmlhbC1pY29ucy9EZWxldGVSZXN0b3JlLnN2ZWx0ZSc7CiAgICBpbXBvcnQgRXllIGZyb20gJ3N2ZWx0ZS1tYXRlcmlhbC1pY29ucy9FeWUuc3ZlbHRlJzsKICAgIGltcG9ydCBFeWVPZmYgZnJvbSAnc3ZlbHRlLW1hdGVyaWFsLWljb25zL0V5ZU9mZi5zdmVsdGUnOwogICAgaW1wb3J0IE5vdGVFZGl0T3V0bGluZSBmcm9tICdzdmVsdGUtbWF0ZXJpYWwtaWNvbnMvTm90ZUVkaXRPdXRsaW5lLnN2ZWx0ZSc7CiAgICBpbXBvcnQgeyBnZXROb3RpZmljYXRpb25zQ29udGV4dCB9IGZyb20gJ3N2ZWx0ZS1ub3RpZmljYXRpb25zJzsKICAgIGltcG9ydCBVdGNUaW1lIGZyb20gJy4uLy4uL2xpYi9jb21wb25lbnRzL1V0Y1RpbWUuc3ZlbHRlJzsKICAgIGltcG9ydCB0eXBlIHsgRW50cnkgfSBmcm9tICcuLi9jb250cm9sbGVycy9lbnRyeSc7CiAgICBpbXBvcnQgdHlwZSB7IExhYmVsIGFzIExhYmVsQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2xhYmVsJzsKICAgIGltcG9ydCB0eXBlIHsgQXV0aCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL3VzZXInOwogICAgaW1wb3J0IHsgcG9wdXAgfSBmcm9tICcuLi9zdG9yZXMnOwogICAgaW1wb3J0IHsgYXBpLCBhcGlQYXRoIH0gZnJvbSAnLi4vdXRpbHMvYXBpUmVxdWVzdCc7CiAgICBpbXBvcnQgewogICAgICAgIGRpc3BsYXlOb3RpZk9uRXJyLAogICAgICAgIFNVQ0NFU1NfTk9USUZJQ0FUSU9OLAogICAgfSBmcm9tICcuLi91dGlscy9ub3RpZmljYXRpb25zJzsKICAgIGltcG9ydCB7IG9iZnVzY2F0ZSwgcmF3TWRUb0h0bWwgfSBmcm9tICcuLi91dGlscy90ZXh0JzsKICAgIGltcG9ydCBBZ2VudFdpZGdldCBmcm9tICcuL0FnZW50V2lkZ2V0LnN2ZWx0ZSc7CiAgICBpbXBvcnQgRG90IGZyb20gJy4vRG90LnN2ZWx0ZSc7CiAgICBpbXBvcnQgTGFiZWwgZnJvbSAnLi9MYWJlbC5zdmVsdGUnOwogICAgaW1wb3J0IExvY2F0aW9uV2lkZ2V0IGZyb20gJy4vTG9jYXRpb25XaWRnZXQuc3ZlbHRlJzsKCiAgICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpOwogICAgY29uc3QgeyBhZGROb3RpZmljYXRpb24gfSA9IGdldE5vdGlmaWNhdGlvbnNDb250ZXh0KCk7CgogICAgZXhwb3J0IGxldCBpZCA9ICcnOwogICAgZXhwb3J0IGxldCB0aXRsZSA9ICcnOwogICAgZXhwb3J0IGxldCBlbnRyeSA9ICcnOwogICAgZXhwb3J0IGxldCBjcmVhdGVkOiBudW1iZXI7CiAgICBleHBvcnQgbGV0IGNyZWF0ZWRUWk9mZnNldCA9IDA7CiAgICBleHBvcnQgbGV0IGxhYmVsOiBMYWJlbENvbnRyb2xsZXIgfCBudWxsIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkIGFzCiAgICAgICAgfCBMYWJlbENvbnRyb2xsZXIKICAgICAgICB8IG51bGwKICAgICAgICB8IHVuZGVmaW5lZDsKICAgIGV4cG9ydCBsZXQgbGF0aXR1ZGU6IG51bWJlciB8IG51bGwgPSBudWxsOwogICAgZXhwb3J0IGxldCBsb25naXR1ZGU6IG51bWJlciB8IG51bGwgPSBudWxsOwogICAgZXhwb3J0IGxldCBkZWxldGVkID0gZmFsc2U7CiAgICBleHBvcnQgbGV0IGRlY3J5cHRlZCA9IHRydWU7Ci,AgICBleHBvcnQgbGV0IGFnZW50RGF0YSA9ICcnOwogICAgZXhwb3J0IGxldCBlZGl0czogRW50cnlbXSA9IFtdOwogICAgZXhwb3J0IGxldCBpc0VkaXQgPSBmYWxzZTsKICAgIGV4cG9ydCBsZXQgc2hvd0Z1bGxEYXRlID0gZmFsc2U7CgogICAgZXhwb3J0IGxldCBvYmZ1c2NhdGVkI,D0gdHJ1ZTsKICAgIGV4cG9ydCBsZXQgc2hvd0xhYmVscyA9IHRydWU7CiAgICBleHBvcnQgbGV0IHNob3dMb2NhdGlvbnMgPSB0cnVlOwogICAgZXhwb3J0IGxldCBpc0luRGlhbG9nID0gZmFsc2U7CgogICAgZXhwb3J0IGxldCBhdXRoOiBBdXRoOwoKICAgIC8vIHNob3cgcmFuZ,G9tIHN0cmluZyBp,bnN0ZWFkIG9mIHRleHQgY29udGVudCBpZiBvYmZ1c2NhdGVkCiAgICBleHBvcnQgbGV0IHNob3dMYWJlbDogTGFiZWxDb250cm9sbGVyIHwgbnVsbCB8IHVuZGVmaW5lZCA9IGxhYmVsOwogICAgJDogaWYgKHNob3dMYWJlbHMgJiYgKCh,sKTogbCBpcyBMYWJlbENvbnRyb2xsZXIgPT4gISFsKShsYWJlbCkpIHsKICAgICAgICBzaG93TGFiZWwgPSB7CiAgICAgICAgICAgIC4uLmxhYmVsLAogICAgICAgICAgICBuYW1lOiBvYmZ1c2NhdGVkID8gb2JmdXNjYXRlKGxhYmVsLm5hbWUpIDogbGFiZWwubmFtZQogICAgICAgIH07CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2VsZiAoKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgICAhY29uZmlybSgKICAgICAgICAgICAgICAgIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gJHsKICAgICAgICAgICAgICAgICAgICBkZWxldGVkID8gJ3Jlc3RvcmUnIDogJ2RlbGV0ZScKICAgICAgICAgICAgICAgIH0gdGhpcyBlbnRyeT9gCiAgICAgICAgICAgICkKICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZGlzcGxheU5vdGlmT25FcnIoCiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbiwKICAgICAgICAgICAgYXdhaXQgYXBpLmRlbGV0ZShhdXRoLCBhcGlQYXRoKCcvZW50cmllcy8/JywgaWQpLCB7CiAgICAgICAgICAgICAgICByZXN0b3JlOiAhIWRlbGV0ZWQKICAgICAgICAgICAgfSkKICAgICAgICApOwoKICAgICAgICBpZiAoaXNJbkRpYWxvZykgcG9wdXAuc2V0KG51bGwpOwoKICAgICAgICBhZGROb3RpZmljYXRpb24oewogICAgICAgICAgICAuLi5TVUNDRVNTX05PVElGSUNBVElPTiwKICAgICAgICAgICAgdGV4dDogYEVudHJ5ICR7ZGVsZXRlZCA/ICdyZXN0b3JlZCcgOiAnZGVsZXRlZCd9YAogICAgICAgIH0pOwogICAgICAgIGRpc3BhdGNoKCd1cGRhdGVkJyk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9nZ2xlT2JmdXNjYXRpb24gKCkgewogICAgICAgIG9iZnVzY2F0ZWQgPSAhb2JmdXNjYXRlZDsKICAgIH0KCiAgICAkOiBlbnRyeUh0bWwgPSBicm93c2VyID8gcmF3TWRUb0h0bWwoZW50cnksIG9iZnVzY2F0ZWQpIDogJyc7CiAgICAvLyBkb2Vzbid0IHNldCByZWFjdGl2ZWx5IG9uIHRvb2x0aXAgY29udGVudCBpZiBpbiBwcm9wcz8/PwogICAgJDogcmVzdG9yZURlbGV0ZVRvb2x0aXAgPSBkZWxldGVkID8gJ1Jlc3RvcmUgRW50cnknIDogJ0RlbGV0ZSBFbnRyeSc7Cg==">{}</script>

<div
    class="entry {obfuscated ? '' : 'visible'} {isInDialog ? 'in-dialog' : ''}"
>
    <p class="mobile-title {obfuscated ? 'obfuscated' : ''}">
        {obfuscated ? obfuscate(title) : title}
    </p>
    <div class="header">
        <div class="flex-space-evenly">
            <span class="time">
                <UtcTime
                    fmt="{showFullDate ? 'ddd DD-MM-YYYY h:mm A' : 'h:mm A'}"
                    timestamp="{created}"
                    tooltipPosition="right"
                    tzOffset="{createdTZOffset}"
                />
            </span>

            <AgentWidget data="{agentData}" />

            {#if latitude && longitude && showLocations}
                <LocationWidget
                    auth="{auth}"
                    entryId="{id}"
                    latitude="{latitude}"
                    longitude="{longitude}"
                    obfuscated="{obfuscated}"
                />
            {/if}

            {#if !obfuscated && !isEdit && edits.length > 0}
                <Dot />
                <a
                    href="/journal/{id}?history=on&obfuscate=0"
                    class="edits-link link"
                >
                    {edits.length} edit{edits.length > 1 ? 's' : ''}
                </a>
            {/if}

            {#if showLabels}
                <Label label="{showLabel}" obfuscated="{obfuscated}" />
            {/if}
        </div>

        <div class="title {obfuscated ? 'obfuscated' : ''}">
            {obfuscated ? obfuscate(title) : title}
        </div>

        <div class="flex-center">
            {#if !obfuscated && !isEdit}
                <button
                    on:click="{deleteSelf}"
                    aria-label="{deleted ? 'Restore' : 'Delete'}"
                    use:tooltip="{{ content: restoreDeleteTooltip }}"
                >
                    {#if deleted}
                        <Restore size="25" />
                    {:else}
                        <Bin size="25" />
                    {/if}
                </button>
                {#if !deleted}
                    <a
                        href="/journal/{id}/edit?obfuscate=0"
                        use:tooltip="{{ content: 'Edit Entry' }}"
                    >
                        <NoteEditOutline size="25" />
                    </a>
                {/if}
            {/if}

            <button
                aria-label="{obfuscated ? 'Show entry' : 'Hide entry'}"
                on:click="{toggleObfuscation}"
            >
                {#if obfuscated}
                    <Eye size="25" />
                {:else}
                    <EyeOff size="25" />
                {/if}
            </button>
        </div>
    </div>
    <p class="body {obfuscated ? 'obfuscated' : ''}">
        {@html entryHtml}
    </p>
</div>

<style lang="less" ✂prettier:content✂="CiAgICBAaW1wb3J0ICcuLi8uLi9zdHlsZXMvdGV4dCc7CiAgICBAaW1wb3J0ICcuLi8uLi9zdHlsZXMvdmFyaWFibGVzJzsKCiAgICAuZW50cnkgewogICAgICAgIHBhZGRpbmc6IDAuOGVtIDA7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGhlaWdodDogZml0LWNvbnRlbnQ7CiAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwoKICAgICAgICAmLAogICAgICAgICogewogICAgICAgICAgICAuZm9udC1kb3NpcygpOwogICAgICAgICAgICBmb250LXNpemU6IDEuMDVyZW07CiAgICAgICAgfQoKICAgICAgICAvLyYudmlzaWJsZTpub3QoLmluLWRpYWxvZykgewogICAgICAgIC8vICAgIGJvcmRlci1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LAogICAgICAgIC8vICAgIEBhY2NlbnQtY29sb3Itc2Vjb25kYXJ5LAogICAgICAgIC8vICAgIHRyYW5zcGFyZW50KSAxIDEwMCU7CiAgICAgICAgLy99CgogICAgICAgIEBtZWRpYSBAbW9iaWxlIHsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIC8vIHNvIGltYWdlcyBkb24ndCBhcHBlYXIgdG9vIGxhcmdlCiAgICAgICAgOmdsb2JhbChpbWcpIHsKICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICAgICAgICBtYXgtaGVpZ2h0OiA1MHZoOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBAYm9yZGVyOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbjogMC41ZW0gMmVtIDAgMDsKICAgICAgICAgICAgcGFkZGluZzogMC4zZW07CgogICAgICAgICAgICBAbWVkaWEgQG1vYmlsZSB7CiAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICA6Z2xvYmFsKHN2ZykgewogICAgICAgICAgICAgICAgY29sb3I6IEB0ZXh0LWNvbG9yLWxpZ2h0OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAudGl0bGUgewogICAgICAgICAgICBmb250LXNpemU6IDEuMmVtOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICBvdmVyZmxvdy14OiBzY3JvbGw7CgogICAgICAgICAgICBAbWVkaWEgQG1vYmlsZSB7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAudGltZSB7CiAgICAgICAgICAgIG1hcmdpbjogMCAwIDAgMC41cmVtOwogICAgICAgICAgICBmb250LXNpemU6IDAuOGVtOwogICAgICAgICAgICBjb2xvcjogQHRleHQtY29sb3ItbGlnaHQ7CiAgICAgICAgfQoKICAgICAgICAuYm9keSB7CiAgICAgICAgICAgIG1hcmdpbjogMCAycmVtOwogICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkOwogICAgICAgICAgICBtYXgtd2lkdGg6IDcwMHB4OwoKICAgICAgICAgICAgQG1lZGlhIEBtb2JpbGUgewogICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAuNXJlbTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gaW5uZXIgPHA+IGVsZW1lbnQgaXMgY3JlYXRlZCB3aGVuIHVzaW5nIEBodG1sCiAgICAgICAgICAgIDpnbG9iYWwocCkgewogICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZ2VuZXJhdGVkIGZyb20gbWFya2Rvd24KCiAgICAgICAgICAgIDpnbG9iYWwodWwpLAogICAgICAgICAgICA6Z2xvYmFsKG9sKSB7CiAgICAgICAgICAgICAgICAvLyB1Z2gKICAgICAgICAgICAgICAgIG1hcmdpbjogLTIuNXJlbSAwIC0yLjVyZW0gMC44cmVtOwogICAgICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKCiAgICAgICAgICAgICAgICA6Z2xvYmFsKGxpKSB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICA6Z2xvYmFsKHRhYmxlKSB7CiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwoKICAgICAgICAgICAgICAgIDpnbG9iYWwodHIpIHsKICAgICAgICAgICAgICAgICAgICA6Z2xvYmFsKHRkKSwKICAgICAgICAgICAgICAgICAgICA6Z2xvYmFsKHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIEBib3JkZXI7CgogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuM3JlbTsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgOmdsb2JhbCh0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIDpnbG9iYWwoYmxvY2txdW90ZSkgewogICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCBAYWNjZW50LWNvbG9yLXNlY29uZGFyeTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDAgMC41ZW07CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDAgMCAxZW07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC5tb2JpbGUtdGl0bGUgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBtYXJnaW46IDJyZW0gMCAtMS4ycmVtIDAuNXJlbTsKICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwoKICAgICAgICAgICAgQG1lZGlhIEBtb2JpbGUgewogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLmVkaXRzLWxpbmsgewogICAgICAgIGZvbnQtc2l6ZTogMC45NXJlbTsKICAgIH0K"></style>