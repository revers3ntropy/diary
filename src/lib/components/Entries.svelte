<script lang="ts" ✂prettier:content✂="CiAgICBpbXBvcnQgeyBicm93c2VyIH0gZnJvbSAnJGFwcC9lbnZpcm9ubWVudCc7CiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJzsKICAgIGltcG9ydCBCaW4gZnJvbSAnc3ZlbHRlLW1hdGVyaWFsLWljb25zL0RlbGV0ZS5zdmVsdGUnOwogICAgaW1wb3J0IFRyYXlBcnJvd1VwIGZyb20gJ3N2ZWx0ZS1tYXRlcmlhbC1pY29ucy9UcmF5QXJyb3dVcC5zdmVsdGUnOwogICAgaW1wb3J0IHsgZ2V0Tm90aWZpY2F0aW9uc0NvbnRleHQgfSBmcm9tICdzdmVsdGUtbm90aWZpY2F0aW9ucyc7CiAgICBpbXBvcnQgRW50cnlHcm91cCBmcm9tICcuLi8uLi9saWIvY29tcG9uZW50cy9FbnRyeUdyb3VwLnN2ZWx0ZSc7CiAgICBpbXBvcnQgUGFnZUNvdW50ZXIgZnJvbSAnLi4vLi4vbGliL2NvbXBvbmVudHMvUGFnZUNvdW50ZXIuc3ZlbHRlJzsKICAgIGltcG9ydCB7IEVudHJ5LCB0eXBlIEVudHJ5RmlsdGVyIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvZW50cnknOwogICAgaW1wb3J0IHR5cGUgeyBBdXRoIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvdXNlcic7CiAgICBpbXBvcnQgeyBvYmZ1c2NhdGVkIH0gZnJvbSAnLi4vc3RvcmVzJzsKICAgIGltcG9ydCB7IGFwaSB9IGZyb20gJy4uL3V0aWxzL2FwaVJlcXVlc3QnOwogICAgaW1wb3J0IHsgZGlzcGxheU5vdGlmT25FcnIgfSBmcm9tICcuLi91dGlscy9ub3RpZmljYXRpb25zJzsKICAgIGltcG9ydCB7IHNob3dQb3B1cCB9IGZyb20gJy4uL3V0aWxzL3BvcHVwcyc7CiAgICBpbXBvcnQgdHlwZSB7IFBpY2tPcHRpb25hbEFuZE11dGFibGUgfSBmcm9tICcuLi91dGlscy90eXBlcyc7CiAgICBpbXBvcnQgU3Bpbm5lciBmcm9tICcuL0Jvb2tTcGlubmVyLnN2ZWx0ZSc7CiAgICBpbXBvcnQgSW1wb3J0RGlhbG9nIGZyb20gJy4vZGlhbG9ncy9JbXBvcnREaWFsb2cuc3ZlbHRlJzsKICAgIGltcG9ydCBTaWRlYmFyIGZyb20gJy4vRW50cmllc1NpZGViYXIuc3ZlbHRlJzsKCiAgICBjb25zdCB7IGFkZE5vdGlmaWNhdGlvbiB9ID0gZ2V0Tm90aWZpY2F0aW9uc0NvbnRleHQoKTsKCiAgICBleHBvcnQgbGV0IGF1dGg6IEF1dGg7CgogICAgZXhwb3J0IGxldCBzaG93U2lkZWJhciA9IGZhbHNlOwogICAgZXhwb3J0IGxldCBzaG93QmluID0gZmFsc2U7CiAgICBleHBvcnQgbGV0IHNob3dJbXBvcnQgPSBmYWxzZTsKICAgIGV4cG9ydCBsZXQgc2hvd1NlYXJjaCA9IHRydWU7CiAgICBleHBvcnQgbGV0IHNob3dMYWJlbHMgPSB0cnVlOwogICAgZXhwb3J0IGxldCBzaG93TG9jYXRpb25zID0gdHJ1ZTsKICAgIGV4cG9ydCBsZXQgcGFnZVNpemU6IG51bWJlcjsKCiAgICBpbnRlcmZhY2UgSU9wdGlvbnMgZXh0ZW5kcyBFbnRyeUZpbHRlciB7CiAgICAgICAgcGFnZVNpemU/OiBudW1iZXI7CiAgICAgICAgcGFnZT86IG51bWJlcjsKICAgIH0KCiAgICBleHBvcnQgbGV0IG9wdGlvbnM6IElPcHRpb25zID0ge307CgogICAgbGV0IGVudHJpZXM6IFJlY29yZDxudW1iZXIsIEVudHJ5W10+ID0ge307CiAgICBsZXQgZW50cnlUaXRsZXM6IFJlY29yZDxudW1iZXIsIEVudHJ5W10+ID0ge307CiAgICBsZXQgZW50cnlDb3VudCA9IDA7CiAgICBsZXQgcGFnZSA9IDA7CiAgICBsZXQgcGFnZXMgPSAwOwogICAgbGV0IHNlYXJjaCA9ICcnOwoKICAgIGxldCBsb2FkaW5nID0gdHJ1ZTsKCiAgICBmdW5jdGlvbiBpbXBvcnRQb3B1cCAoKSB7CiAgICAgICAgc2hvd1BvcHVwKAogICAgICAgICAgICBJbXBvcnREaWFsb2csCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGF1dGgsCiAgICAgICAgICAgICAgICB0eXBlOiAnZW50cmllcycsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbG9hZEVudHJpZXMsCiAgICAgICAgKTsKICAgIH0KCiAgICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsb2FkRW50cmllcyAoZm9yY2UgPSBmYWxzZSkgewogICAgICAgIGlmIChsb2FkaW5nICYmICFmb3JjZSkgcmV0dXJuOwogICAgICAgIGxvYWRpbmcgPSB0cnVlOwoKICAgICAgICBjb25zdCBlbnRyaWVzT3B0aW9uczogUGlja09wdGlvbmFsQW5kTXV0YWJsZTxJT3B0aW9ucywgJ3NlYXJjaCc+ID0gewogICAgICAgICAgICBwYWdlLAogICAgICAgICAgICAuLi5vcHRpb25zLAogICAgICAgICAgICBwYWdlU2l6ZSwKICAgICAgICB9OwogICAgICAgIGlmIChzZWFyY2gpIHsKICAgICAgICAgICAgZW50cmllc09wdGlvbnMuc2VhcmNoID0gc2VhcmNoOwogICAgICAgIH0KICAgICAgICBpZiAoIWVudHJpZXNPcHRpb25zLnNlYXJjaCkgewogICAgICAgICAgICBkZWxldGUgZW50cmllc09wdGlvbnMuc2VhcmNoOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBhcGkKICAgICAgICAgICAgLmdldChhdXRoLCBgL2VudHJpZXNgLCBlbnRyaWVzT3B0aW9ucykKICAgICAgICAgICAgLnRoZW4ocmVzID0+IGRpc3BsYXlOb3RpZk9uRXJyKGFkZE5vdGlmaWNhdGlvbiwgcmVzKSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGVudHJpZXMgPSBFbnRyeS5ncm91cEVudHJpZXNCeURheShyZXMuZW50cmllcyk7CiAgICAgICAgICAgICAgICBwYWdlcyA9IHJlcy50b3RhbFBhZ2VzOwogICAgICAgICAgICAgICAgZW50cnlDb3VudCA9IHJlcy50b3RhbEVudHJpZXM7CgogICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgcmVzID0gZGlzcGxheU5vdGlmT25FcnIoCiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbiwKICAgICAgICAgICAgYXdhaXQgYXBpLmdldChhdXRoLCAnL2VudHJpZXMvdGl0bGVzJyksCiAgICAgICAgKTsKICAgICAgICBlbnRyeVRpdGxlcyA9IEVudHJ5Lmdyb3VwRW50cmllc0J5RGF5KHJlcy5lbnRyaWVzKTsKICAgIH0KCiAgICBleHBvcnQgY29uc3QgcmVsb2FkID0gKCkgPT4gcmVsb2FkRW50cmllcygpOwoKICAgIG9uTW91bnQoYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IHJlbG9hZEVudHJpZXModHJ1ZSk7CiAgICB9KTsKICAgICQ6IFsgcGFnZSwgc2VhcmNoLCBicm93c2VyID8gcmVsb2FkRW50cmllcygpIDogMCBdOwo=">{}</script>

<div>
    <div>
        <div class="entries-menu">
            <div>
                {#if showSidebar}
                    <Sidebar titles="{entryTitles}" auth="{auth}" />
                {/if}
                {#if showBin}
                    <a class="with-circled-icon" href="/journal/deleted">
                        <Bin size="30" />
                        Bin
                    </a>
                {/if}
                {#if showImport}
                    <button
                        class="with-circled-icon hide-mobile"
                        on:click="{importPopup}"
                    >
                        <TrayArrowUp size="30" />
                        Import
                    </button>
                {/if}
            </div>
            <div>
                <PageCounter
                    bind:page="{page}"
                    pageLength="{pageSize}"
                    pages="{pages}"
                    total="{entryCount}"
                />
            </div>

            <div>
                {#if showSearch}
                    <input
                        bind:value="{search}"
                        placeholder="Search..."
                        type="text"
                    />
                {/if}
            </div>
        </div>
    </div>
    <div class="entries">
        {#if loading}
            <Spinner />
        {:else}
            {#each Object.keys(entries).sort((a, b) => parseInt(b) - parseInt(a)) as day}
                <EntryGroup
                    entries="{entries[parseInt(day)]}"
                    on:updated="{() => reloadEntries()}"
                    obfuscated="{$obfuscated}"
                    showLabels="{showLabels}"
                    showLocations="{showLocations}"
                    auth="{auth}"
                    day="{parseInt(day)}"
                />
            {/each}
        {/if}
    </div>
</div>

<style lang="less" ✂prettier:content✂="CiAgICBAaW1wb3J0ICcuLi8uLi9zdHlsZXMvdmFyaWFibGVzJzsKICAgIEBpbXBvcnQgJy4uLy4uL3N0eWxlcy9sYXlvdXQnOwoKICAgIC5lbnRyaWVzLW1lbnUgewogICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsKICAgICAgICBtYXJnaW46IDNyZW0gMCAwIDA7CgogICAgICAgICYgPiBkaXYgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAgICAgICAgICY6Zmlyc3QtY2hpbGQgewogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzdGFydDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJjpudGgtY2hpbGQoMikgewogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICY6bGFzdC1jaGlsZCB7CiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYS5wcmltYXJ5IHsKICAgICAgICAgICAgbWFyZ2luOiAwIDFlbTsKICAgICAgICB9CgogICAgICAgIEBtZWRpYSBAbW9iaWxlIHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIG1hcmdpbjogMDsKCiAgICAgICAgICAgICYgPiBkaXYgewogICAgICAgICAgICAgICAgbWFyZ2luOiAxZW0gMDsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7CgogICAgICAgICAgICAgICAgJjpmaXJzdC1jaGlsZCB7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"></style>